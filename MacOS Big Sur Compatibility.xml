<?xml version="1.0" encoding="UTF-8"?><extensionAttribute>
<displayName>MacOS Big Sur Compatibility</displayName>
<description>Test compatibility of computers with macOS Big Sur</description>
<dataType>string</dataType>
<scriptContentsMac>#!/bin/bash&#13;
&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
#&#13;
# Copyright (c) 2020 Jamf.  All rights reserved.&#13;
#&#13;
#       Redistribution and use in source and binary forms, with or without&#13;
#       modification, are permitted provided that the following conditions are met:&#13;
#               * Redistributions of source code must retain the above copyright&#13;
#                 notice, this list of conditions and the following disclaimer.&#13;
#               * Redistributions in binary form must reproduce the above copyright&#13;
#                 notice, this list of conditions and the following disclaimer in the&#13;
#                 documentation and/or other materials provided with the distribution.&#13;
#               * Neither the name of the Jamf nor the names of its contributors may be&#13;
#                 used to endorse or promote products derived from this software without&#13;
#                 specific prior written permission.&#13;
#&#13;
#       THIS SOFTWARE IS PROVIDED BY JAMF SOFTWARE, LLC "AS IS" AND ANY&#13;
#       EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED&#13;
#       WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE&#13;
#       DISCLAIMED. IN NO EVENT SHALL JAMF SOFTWARE, LLC BE LIABLE FOR ANY&#13;
#       DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES&#13;
#       (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;&#13;
#       LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND&#13;
#       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT&#13;
#       (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS&#13;
#       SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&#13;
#&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
# &#13;
# This script is published here:&#13;
# https://github.com/laurentpertois/BigSur-Compatibility-Checker&#13;
#&#13;
# Other scripts and resources available here:&#13;
# https://github.com/laurentpertois?tab=repositories&#13;
#&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
#&#13;
# This script was designed to be used as an Extension Attribute to ensure specific&#13;
# requirements have been met to deploy macOS Big Sur.&#13;
#&#13;
# General Requirements:&#13;
#		- OS X 10.9.0 or later (It seems, as of the day I write this Apple has not yet made recommendations, this page and the script will be adapted if necessary when the information will become public)&#13;
#		- 4GB of memory (It seems, as of the day I write this Apple has not yet made recommendations, this page and the script will be adapted if necessary when the information will become public)&#13;
#		- 20GB of available storage (It seems, as of the day I write this Apple has not yet made recommendations, this page and the script will be adapted if necessary when the information will become public)&#13;
#&#13;
#&#13;
# These last 2 requirements can be modified in the first 2 variables (MINIMUMRAM&#13;
# and MINIMUMSPACE).&#13;
# 	- REQUIREDMINIMUMRAM: minimum RAM required, in GB&#13;
# 	- REQUIREDMINIMUMSPACE: minimum disk space available, in GB. Big Sur has different&#13;
#							requirements depending on the OS from which you update&#13;
#							Adjust to your needs, lines 79 (Catalina) or 82 (pre-Catalina) &#13;
#&#13;
#&#13;
# Mac Hardware Requirements and equivalent as minimum Model Identifier&#13;
# 	- MacBook (Early 2015 or newer), ie MacBook8,1&#13;
# 	- MacBook Pro (Late 2013 or newer), ie MacBookPro11,1&#13;
# 	- MacBook Air (Mid 2013 or newer), ie MacBookAir6,1&#13;
# 	- Mac mini (Late 2014 or newer), ie Macmini7,1&#13;
# 	- iMac (Mid 2014 or newer), ie iMac14,4&#13;
# 	- iMac Pro, ie iMacPro1,1&#13;
# 	- Mac Pro (Late 2013 or newer), ie MacPro6,1&#13;
#&#13;
#&#13;
# Default compatibility is set to False if no test pass (variable COMPATIBILITY)&#13;
#&#13;
# Written by: Laurent Pertois | Senior Professional Services Engineer | Jamf&#13;
#&#13;
# Created On: 2020-07-23&#13;
# Modified ON: 2020-11-13 to adjust required disk space&#13;
# Modified On: 2021-01-19 to fix an issue with MacBook Pro models (basically they were all true)&#13;
#&#13;
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #&#13;
&#13;
# Checks minimum version of the OS before upgrade (10.9.0)&#13;
OSVERSIONMAJOR=$(sw_vers -buildVersion | cut -c 1-2)&#13;
&#13;
# Minimum RAM and Disk Space required (4GB and 45GB default. Note that REQUIREDMINIMUMSPACE must be set to an integer)&#13;
# According to https://support.apple.com/en-us/HT211238 the minimum space requirement for Big Sur is 35.5GB if you're coming from Sierra, it can go up to 44.5GB if coming from an older version&#13;
# This value is acconting for the required space and the size of the installer (almost 13GB)&#13;
REQUIREDMINIMUMRAM=4&#13;
&#13;
if [[ "$OSVERSIONMAJOR" -eq 16 ]]; then&#13;
	# For Sierra and higher required space is 12.3GB for the installer and 35.5GB for required disk space for installation which equals to 47.8GB, 50GB is giving a bit of extra free space for safety&#13;
	REQUIREDMINIMUMSPACE=50&#13;
else&#13;
	# For pre-Sierra required space is 12.3GB for the installer and 44.5GB for required disk space for installation which equals to 56.8GB, 60GB is giving a bit of extra free space for safety&#13;
	REQUIREDMINIMUMSPACE=60&#13;
fi&#13;
&#13;
#########################################################################################&#13;
############### DO NOT CHANGE UNLESS NEEDED&#13;
#########################################################################################&#13;
&#13;
# Default values for Compatibility is false&#13;
COMPATIBILITY="False"&#13;
&#13;
#########################################################################################&#13;
############### Let's go!&#13;
#########################################################################################&#13;
&#13;
# Checks if computer meets pre-requisites for Big Sur&#13;
if [[ "$OSVERSIONMAJOR" -ge 13 &amp;&amp; "$OSVERSIONMAJOR" -le 19 ]]; then&#13;
&#13;
	# Transform GB into Bytes&#13;
	GIGABYTES=$((1024 * 1024 * 1024))&#13;
	MINIMUMRAM=$(($REQUIREDMINIMUMRAM * $GIGABYTES))&#13;
	MINIMUMSPACE=$(($REQUIREDMINIMUMSPACE * $GIGABYTES))&#13;
&#13;
	# Gets the Model Identifier, splits name and major version&#13;
	MODELIDENTIFIER=$(/usr/sbin/sysctl -n hw.model)&#13;
	MODELNAME=$(echo "$MODELIDENTIFIER" | sed 's/[^a-zA-Z]//g')&#13;
	MODELVERSION=$(echo "$MODELIDENTIFIER" | sed -e 's/[^0-9,]//g' -e 's/,//')&#13;
&#13;
	# Gets amount of memory installed&#13;
	MEMORYINSTALLED=$(/usr/sbin/sysctl -n hw.memsize)&#13;
&#13;
	# Gets free space on the boot drive&#13;
	FREESPACE=$(diskutil info / | awk -F '[()]' '/Free Space|Available Space/ {print $2}' | sed -e 's/\ Bytes//')&#13;
&#13;
	# Checks if computer meets pre-requisites for Big Sur&#13;
	if [[ "$MODELNAME" == "iMac" &amp;&amp; "$MODELVERSION" -ge 144 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
		COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "iMacPro" &amp;&amp; "$MODELVERSION" -ge 10 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
		COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "Macmini" &amp;&amp; "$MODELVERSION" -ge 70 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
		COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "MacPro" &amp;&amp; "$MODELVERSION" -ge 60 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
	    COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "MacBook" &amp;&amp; "$MODELVERSION" -ge 80 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
	    COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "MacBookAir" &amp;&amp; "$MODELVERSION" -ge 60 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
	    COMPATIBILITY="True"&#13;
	elif [[ "$MODELNAME" == "MacBookPro" &amp;&amp; "$MODELVERSION" -ge 110 &amp;&amp; "$MEMORYINSTALLED" -ge "$MINIMUMRAM" &amp;&amp; "$FREESPACE" -ge "$MINIMUMSPACE" ]]; then&#13;
	    COMPATIBILITY="True"&#13;
	fi&#13;
	# Outputs result&#13;
	echo "&lt;result&gt;$COMPATIBILITY&lt;/result&gt;"&#13;
else&#13;
	echo "&lt;result&gt;$COMPATIBILITY&lt;/result&gt;"&#13;
	exit $?&#13;
fi&#13;
</scriptContentsMac>
</extensionAttribute>
